---
- name: Install Kubernetes components
  hosts: localhost
  become: yes

  tasks:
  - name: Install pip2
    package:
      name: python3-pip
      shell: allow_upgrade

  - name: Install AWS CLI
    pip:
      name: awscli
      state: present

  - name: Install KOPS
    pip:
      name: kops
      state: present

  - name: Install KUBECTL
    shell: |
      curl -LO https://dl.k8s.io/release/stable.txt
      VERSION=$(cat stable.txt)
      curl -LO https://dl.k8s.io/$VERSION/bin/linux/amd64/kubectl
      chmod +x kubectl
      sudo mv kubectl /usr/local/bin/